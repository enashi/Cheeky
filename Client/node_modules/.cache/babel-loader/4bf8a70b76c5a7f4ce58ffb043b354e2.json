{"ast":null,"code":"var _jsxFileName = \"/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Post/NewPostForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { addPost, getPosts } from '../../Utilitaire/actions/post.actions';\nimport { isEmpty, timestampParser } from '../../Utilitaire/Util';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NewPostForm = () => {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(true); //pour mettre un chargement pendant la charge de la data\n\n  const [message, setMessage] = useState(\"\"); //texte du message\n\n  const userData = useSelector(state => state.userReducer); //charger le contenu de notre store (user et users)\n\n  const error = useSelector(state => state.errorReducer.postError);\n  const dispatch = useDispatch();\n\n  const handlePost = async () => {\n    if (message) {\n      const data = new FormData(); //stocker le file + texte ...\n\n      data.append('posterId', userData._id);\n      data.append('message', message);\n      await dispatch(addPost(data)); // on envoie la data pour faire la requete \n\n      dispatch(getPosts());\n      cancelPost();\n    } else {\n      alert(\"Veuillez entrer un message\");\n    }\n  };\n\n  const cancelPost = () => {\n    setMessage('');\n  };\n\n  useEffect(() => {\n    //si la data est vide alors on fait l'icone de chargement\n    if (!isEmpty(userData)) {\n      setIsLoading(false);\n    }\n  }, [userData, message]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-container\",\n    children: isLoading ? /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"fas fa-spinner fa-pulse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-left\",\n            children: /*#__PURE__*/_jsxDEV(NavLink, {\n              exact: true,\n              to: \"/profil\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-info\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: userData.picture,\n                  width: \"80px\",\n                  height: \"80px\",\n                  alt: \"user-img\"\n                  /*quand on clique sur la photo de l'utilisateur alors on va dans notre profil */\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 52,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-right\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"message\",\n              id: \"message\",\n              placeholder: \"Quoi de beau ?\",\n              onChange: e => setMessage(e.target.value),\n              value: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"footer-form\",\n          children: [\" \", !isEmpty(error.format) && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error.format\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 56\n          }, this), !isEmpty(error.maxSize) && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error.maxSize\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 57\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-send\",\n            children: [message || postPicture || video.length > 20 ?\n            /*#__PURE__*/\n\n            /* permet d'afficher le bouton uniquement quand il y a du contenu dedans */\n            _jsxDEV(\"button\", {\n              className: \"cancel\",\n              onClick: cancelPost,\n              children: \"Annuler message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 37\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"send\",\n              onClick: handlePost,\n              children: \"Envoyer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 21\n      }, this)\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n};\n\n_s(NewPostForm, \"+3F6XWwCKS07IaksIr19xrnMTxg=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = NewPostForm;\nexport default NewPostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewPostForm\");","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Post/NewPostForm.js"],"names":["React","useEffect","useState","useDispatch","useSelector","NavLink","addPost","getPosts","isEmpty","timestampParser","NewPostForm","isLoading","setIsLoading","message","setMessage","userData","state","userReducer","error","errorReducer","postError","dispatch","handlePost","data","FormData","append","_id","cancelPost","alert","picture","e","target","value","format","maxSize","postPicture","video","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { addPost, getPosts } from '../../Utilitaire/actions/post.actions';\r\nimport { isEmpty, timestampParser } from '../../Utilitaire/Util';\r\n\r\nconst NewPostForm = () => {\r\n    const [isLoading, setIsLoading] = useState(true); //pour mettre un chargement pendant la charge de la data\r\n    const [message, setMessage] = useState(\"\"); //texte du message\r\n    const userData = useSelector((state) => state.userReducer); //charger le contenu de notre store (user et users)\r\n    const error = useSelector((state) => state.errorReducer.postError);\r\n    const dispatch = useDispatch();\r\n\r\n    const handlePost = async () => {\r\n        if (message) {\r\n            const data = new FormData(); //stocker le file + texte ...\r\n            data.append('posterId', userData._id);\r\n            data.append('message', message);\r\n\r\n            await dispatch(addPost(data)); // on envoie la data pour faire la requete \r\n            dispatch(getPosts());\r\n            cancelPost();\r\n\r\n        } else {\r\n            alert(\"Veuillez entrer un message\");\r\n        }\r\n    };\r\n\r\n    const cancelPost = () => {\r\n        setMessage('');\r\n    };\r\n\r\n    useEffect(() => {\r\n        //si la data est vide alors on fait l'icone de chargement\r\n        if (!isEmpty(userData)) {\r\n            setIsLoading(false);\r\n        }\r\n    }, [userData, message])\r\n\r\n    return (\r\n        <div className=\"post-container\">\r\n            {isLoading ? (\r\n                <i className=\"fas fa-spinner fa-pulse\"></i>\r\n            ) : (\r\n                <>\r\n                    <div className=\"post-form\">\r\n                        <div className=\"card-container\">\r\n\r\n                            <div className=\"card-left\">\r\n                                <NavLink exact to=\"/profil\">\r\n                                    <div className=\"user-info\">\r\n                                        <img src={userData.picture} width=\"80px\" height=\"80px\" alt=\"user-img\" /*quand on clique sur la photo de l'utilisateur alors on va dans notre profil */ />\r\n                                    </div>\r\n                                </NavLink>\r\n                            </div>\r\n\r\n                            <div className=\"card-right\">\r\n                                <textarea\r\n                                    name=\"message\"\r\n                                    id=\"message\"\r\n                                    placeholder=\"Quoi de beau ?\"\r\n                                    onChange={(e) => setMessage(e.target.value)}\r\n                                    value={message}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"footer-form\"> {/*Si on a mis une image alors on peut pas mettre de vidéo et inversement */}\r\n\r\n                            {!isEmpty(error.format) && <p>{error.format}</p>}\r\n                            {!isEmpty(error.maxSize) && <p>{error.maxSize}</p>}\r\n                            <div className=\"btn-send\">\r\n                                {message || postPicture || video.length > 20 ? ( /* permet d'afficher le bouton uniquement quand il y a du contenu dedans */\r\n                                    <button className=\"cancel\" onClick={cancelPost}>Annuler message</button>\r\n                                ) : null}\r\n\r\n                                <button className=\"send\" onClick={handlePost}>Envoyer</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewPostForm;"]},"metadata":{},"sourceType":"module"}