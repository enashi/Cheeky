{"ast":null,"code":"var _jsxFileName = \"/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Thread.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getPosts } from '../Utilitaire/actions/post.actions';\nimport { isEmpty } from \"../Utilitaire/Util\";\nimport Card from './Post/Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Thread = post => {\n  _s();\n\n  const [loadPost, setLoadPost] = useState(true);\n  const [count, setCount] = useState(5); //pour savoir le nombre de post qu'on va lire\n\n  const dispatch = useDispatch(); //permet d'envoyer l'action\n\n  const posts = useSelector(state => state.postReducer); //on se recupère le postReducers ( la ou il y a tout les posts)\n\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const loadMore = () => {\n    if (window.innerHeight + document.documentElement.scrollTop + 1 > document.scrollingElement.scrollHeight) {\n      setLoadPost(true); //document.scrollingEl... c'est la taille du scroll (2000 ou 3000px)\n      // windows.innerHeight + ... c'est l'endroit on ou est exactement quand on navigue\n      // quand ca touche le bas alors loadPost est appelé et vu qu'il est dans le callback, alors il passe sur true et on appel don useEffect qui va ajouter des post à afficher\n    }\n  };\n\n  const handleSearchTerm = e => {\n    let value = e.target.value;\n    setSearchTerm(value);\n  }; //quand on va lancer le compenants du thread, on va se récupérer tout les postes\n\n\n  useEffect(() => {\n    if (loadPost) {\n      dispatch(getPosts(count));\n      setLoadPost(false);\n      setCount(count + 5); //quand on appel loadpost on incrémente de 5\n    }\n\n    window.addEventListener('scroll', loadMore); //dès qu'on scroll on appel la fonction loadMore, pour analyser ou on est dans la page\n\n    return () => window.removeEventListener('scroll', loadMore); //Quand on est plus dans cet element alors on remove l'enventlistener\n  }, [loadPost, dispatch, count]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"thread-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bar-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"searchbar\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"searchBar\",\n          id: \"searchBar\",\n          placeholder: \"Rechercher...\",\n          onChange: handleSearchTerm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: !isEmpty(posts[0]) &&\n      /*évite l'erreur si post est vide */\n      posts.filter(post => post.message.toLowerCase().includes(searchTerm.toLowerCase())).map(post => {\n        /*On va détailler chaque éléments  */\n        return /*#__PURE__*/_jsxDEV(Card, {\n          post: post\n        }, post._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 14\n        }, this);\n        /*récupère chaque id unique du posts et toutes les informations qui va avec*/\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Thread, \"euykCJDEnn2ghkY/CF7SOdCfyS0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Thread;\nexport default Thread;\n\nvar _c;\n\n$RefreshReg$(_c, \"Thread\");","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Thread.js"],"names":["React","useEffect","useState","useDispatch","useSelector","getPosts","isEmpty","Card","Thread","post","loadPost","setLoadPost","count","setCount","dispatch","posts","state","postReducer","searchTerm","setSearchTerm","loadMore","window","innerHeight","document","documentElement","scrollTop","scrollingElement","scrollHeight","handleSearchTerm","e","value","target","addEventListener","removeEventListener","filter","message","toLowerCase","includes","map","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'; \r\nimport { getPosts } from '../Utilitaire/actions/post.actions';\r\nimport { isEmpty } from \"../Utilitaire/Util\";\r\nimport Card from './Post/Card';\r\n\r\nconst Thread = (post) => {\r\n\tconst [loadPost, setLoadPost] = useState(true);\r\n\tconst [count, setCount] = useState(5); //pour savoir le nombre de post qu'on va lire\r\n\tconst dispatch = useDispatch(); //permet d'envoyer l'action\r\n\tconst posts  = useSelector((state) => state.postReducer); //on se recupère le postReducers ( la ou il y a tout les posts)\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n\tconst loadMore = () => {\r\n\t\tif (window.innerHeight + document.documentElement.scrollTop + 1 > document.scrollingElement.scrollHeight){\r\n\t\t\tsetLoadPost(true); //document.scrollingEl... c'est la taille du scroll (2000 ou 3000px)\r\n\t\t\t\t\t\t\t\t// windows.innerHeight + ... c'est l'endroit on ou est exactement quand on navigue\r\n\t\t\t\t\t\t\t\t// quand ca touche le bas alors loadPost est appelé et vu qu'il est dans le callback, alors il passe sur true et on appel don useEffect qui va ajouter des post à afficher\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSearchTerm = (e) => {\r\n\t\tlet value = e.target.value;\r\n\t\tsetSearchTerm(value)    \r\n\t};\r\n\r\n    //quand on va lancer le compenants du thread, on va se récupérer tout les postes\r\n\tuseEffect(() => {\r\n\t\tif (loadPost){\r\n\t\t\tdispatch(getPosts(count));\r\n\t\t\tsetLoadPost(false);\r\n\t\t\tsetCount(count + 5); //quand on appel loadpost on incrémente de 5\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('scroll', loadMore); //dès qu'on scroll on appel la fonction loadMore, pour analyser ou on est dans la page\r\n\t\treturn () => window.removeEventListener('scroll', loadMore); //Quand on est plus dans cet element alors on remove l'enventlistener\r\n\t}, [loadPost, dispatch, count])\r\n\r\n    return (\r\n\t\t<div className=\"thread-container\">\r\n\t\t\t<div className=\"bar-container\">\r\n\t\t\t\t<div className=\"searchbar\"> \r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"searchBar\"\r\n\t\t\t\t\t\tid=\"searchBar\"\r\n\t\t\t\t\t\tplaceholder=\"Rechercher...\"\r\n\t\t\t\t\t\tonChange={handleSearchTerm}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div> \r\n\t\t\t</div>\r\n\t\t\t<br/>\r\n\t\t\t<ul>\r\n\t\t\t\t{!isEmpty(posts[0]) &&  /*évite l'erreur si post est vide */ \r\n\t\t\t\t\tposts.filter(post => post.message.toLowerCase().includes(searchTerm.toLowerCase())).map((post) => { /*On va détailler chaque éléments  */\r\n\t\t\t\t\t\treturn <Card post={post} key={post._id} /> /*récupère chaque id unique du posts et toutes les informations qui va avec*/\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ul>   \r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Thread;"]},"metadata":{},"sourceType":"module"}