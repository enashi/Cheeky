{"ast":null,"code":"import Axios from 'axios';\nexport const UserLoading = \"User loading\";\nexport const User = \"User\";\nexport const Register = \"Register user\";\nexport const Login = \"Login user\";\nexport const Logout = \"Logout user\";\n\nconst userLoading = dispatch => {\n  dispatch({\n    type: \"User loading\"\n  });\n};\n\nexport const register = formData => {\n  return dispatch => {\n    return Axios.post('http://localhost:4000/api/sign/register', formData).then(res => {\n      localStorage.setItem(\"cookie\", res.data.cookies);\n      localStorage.setItem(\"user\", res.data.user);\n      dispatch({\n        type: \"Register user\",\n        payload: res.data\n      });\n    }).catch(err => {\n      console.dir(err);\n    });\n  };\n};\nexport const login = formData => {\n  return dispatch => {\n    return Axios.post('http://localhost:4000/api/sign/login', formData).then(res => {\n      localStorage.setItem(\"cookie\", res.data.cookies);\n      localStorage.setItem(\"user\", res.data.user);\n      dispatch({\n        type: \"Login user\",\n        payload: res.data\n      });\n    }).catch(err => {\n      console.dir(err);\n    });\n  };\n};\nexport const logout = () => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        Authorization: 'Bearer ' + localStorage.setItem('cookie', '')\n      }\n    };\n    const res = await Axios.post('http://localhost:4000/api/sign/logout', config);\n    dispatch({\n      type: \"Logout user\",\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n  }\n\n  ;\n};\nexport const getUser = () => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        Authorization: 'Bearer ' + localStorage.getItem('cookie')\n      }\n    };\n    const res = await Axios.get('http://localhost:4000/api/user/', config);\n    dispatch({\n      type: \"User\",\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n  }\n\n  ;\n};","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6/LU3IN017/TME/dossier sans titre/cheeky/Client/src/component/Utilitaire/reducers/authAction.js"],"names":["Axios","UserLoading","User","Register","Login","Logout","userLoading","dispatch","type","register","formData","post","then","res","localStorage","setItem","data","cookies","user","payload","catch","err","console","dir","login","logout","config","headers","Authorization","log","getUser","getItem","get"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,WAAW,GAAG,cAApB;AACP,OAAO,MAAMC,IAAI,GAAG,MAAb;AACP,OAAO,MAAMC,QAAQ,GAAG,eAAjB;AACP,OAAO,MAAMC,KAAK,GAAG,YAAd;AACP,OAAO,MAAMC,MAAM,GAAG,aAAf;;AAEP,MAAMC,WAAW,GAAIC,QAAD,IAAc;AACjCA,EAAAA,QAAQ,CAAC;AACRC,IAAAA,IAAI,EAAE;AADE,GAAD,CAAR;AAGA,CAJD;;AAMA,OAAO,MAAMC,QAAQ,GAAIC,QAAD,IAAc;AACrC,SAAQH,QAAD,IAAc;AACpB,WAAOP,KAAK,CAACW,IAAN,CACN,yCADM,EAEND,QAFM,EAINE,IAJM,CAIAC,GAAD,IAAS;AACdC,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BF,GAAG,CAACG,IAAJ,CAASC,OAAxC;AACAH,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BF,GAAG,CAACG,IAAJ,CAASE,IAAtC;AACAX,MAAAA,QAAQ,CAAC;AACRC,QAAAA,IAAI,EAAE,eADE;AAERW,QAAAA,OAAO,EAAEN,GAAG,CAACG;AAFL,OAAD,CAAR;AAIA,KAXM,EAYNI,KAZM,CAYCC,GAAD,IAAS;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,KAdM,CAAP;AAeA,GAhBD;AAiBA,CAlBM;AAoBP,OAAO,MAAMG,KAAK,GAAId,QAAD,IAAc;AAClC,SAAQH,QAAD,IAAc;AACpB,WAAOP,KAAK,CAACW,IAAN,CACN,sCADM,EAEND,QAFM,EAINE,IAJM,CAIAC,GAAD,IAAS;AACdC,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BF,GAAG,CAACG,IAAJ,CAASC,OAAxC;AACAH,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BF,GAAG,CAACG,IAAJ,CAASE,IAAtC;AACAX,MAAAA,QAAQ,CAAC;AACRC,QAAAA,IAAI,EAAE,YADE;AAERW,QAAAA,OAAO,EAAEN,GAAG,CAACG;AAFL,OAAD,CAAR;AAIA,KAXM,EAYNI,KAZM,CAYCC,GAAD,IAAS;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,KAdM,CAAP;AAeA,GAhBD;AAiBA,CAlBM;AAoBP,OAAO,MAAMI,MAAM,GAAG,MAAM,MAAMlB,QAAN,IAAkB;AAC7C,MAAI;AACH,UAAMmB,MAAM,GAAG;AACdC,MAAAA,OAAO,EAAE;AACRC,QAAAA,aAAa,EAAE,YAAYd,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+B,EAA/B;AADnB;AADK,KAAf;AAMA,UAAMF,GAAG,GAAG,MAAMb,KAAK,CAACW,IAAN,CAAW,uCAAX,EAAoDe,MAApD,CAAlB;AACAnB,IAAAA,QAAQ,CAAC;AACRC,MAAAA,IAAI,EAAE,aADE;AAERW,MAAAA,OAAO,EAAEN,GAAG,CAACG;AAFL,KAAD,CAAR;AAIA,GAZD,CAYC,OAAMK,GAAN,EAAW;AACXC,IAAAA,OAAO,CAACO,GAAR,CAAaR,GAAb;AACA;;AAAA;AACD,CAhBM;AAkBP,OAAO,MAAMS,OAAO,GAAG,MAAM,MAAMvB,QAAN,IAAkB;AAC9C,MAAI;AACH,UAAMmB,MAAM,GAAG;AACdC,MAAAA,OAAO,EAAE;AACRC,QAAAA,aAAa,EAAE,YAAYd,YAAY,CAACiB,OAAb,CAAqB,QAArB;AADnB;AADK,KAAf;AAMA,UAAMlB,GAAG,GAAG,MAAMb,KAAK,CAACgC,GAAN,CAAU,iCAAV,EAA6CN,MAA7C,CAAlB;AACAnB,IAAAA,QAAQ,CAAC;AACRC,MAAAA,IAAI,EAAE,MADE;AAERW,MAAAA,OAAO,EAAEN,GAAG,CAACG;AAFL,KAAD,CAAR;AAIA,GAZD,CAYC,OAAMK,GAAN,EAAW;AACXC,IAAAA,OAAO,CAACO,GAAR,CAAaR,GAAb;AACA;;AAAA;AACD,CAhBM","sourcesContent":["import Axios from 'axios';\n\nexport const UserLoading = \"User loading\";\nexport const User = \"User\";\nexport const Register = \"Register user\";\nexport const Login = \"Login user\";\nexport const Logout = \"Logout user\";\n\nconst userLoading = (dispatch) => {\n\tdispatch({\n\t\ttype: \"User loading\"\n\t})\n}\n\nexport const register = (formData) => {\n\treturn (dispatch) => {\n\t\treturn Axios.post(\n\t\t\t'http://localhost:4000/api/sign/register',\n\t\t\tformData\n\t\t)\n\t\t.then((res) => {\n\t\t\tlocalStorage.setItem(\"cookie\", res.data.cookies);\n\t\t\tlocalStorage.setItem(\"user\", res.data.user);\n\t\t\tdispatch({\n\t\t\t\ttype: \"Register user\",\n\t\t\t\tpayload: res.data\n\t\t\t})\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.dir(err);\n\t\t})\n\t}\n};\n\nexport const login = (formData) => {\n\treturn (dispatch) => {\n\t\treturn Axios.post(\n\t\t\t'http://localhost:4000/api/sign/login',\n\t\t\tformData\n\t\t)\n\t\t.then((res) => {\n\t\t\tlocalStorage.setItem(\"cookie\", res.data.cookies);\n\t\t\tlocalStorage.setItem(\"user\", res.data.user);\n\t\t\tdispatch({\n\t\t\t\ttype: \"Login user\",\n\t\t\t\tpayload: res.data\n\t\t\t})\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.dir(err);\n\t\t})\n\t}\n};\n\nexport const logout = () => async dispatch => {\n\ttry { \n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer ' + localStorage.setItem('cookie', '')\n\t\t\t}\n\t\t};\n\n\t\tconst res = await Axios.post('http://localhost:4000/api/sign/logout', config)\n\t\tdispatch({ \n\t\t\ttype: \"Logout user\", \n\t\t\tpayload: res.data \n\t\t}); \n\t}catch(err) {\n\t\tconsole.log( err )\n\t};\n}\n\nexport const getUser = () => async dispatch => {\n\ttry { \n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer ' + localStorage.getItem('cookie')\n\t\t\t}\n\t\t};\n\n\t\tconst res = await Axios.get('http://localhost:4000/api/user/', config)\n\t\tdispatch({ \n\t\t\ttype: \"User\", \n\t\t\tpayload: res.data \n\t\t}); \n\t}catch(err) {\n\t\tconsole.log( err )\n\t};\n};"]},"metadata":{},"sourceType":"module"}