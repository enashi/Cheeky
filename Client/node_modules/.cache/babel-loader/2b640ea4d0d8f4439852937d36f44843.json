{"ast":null,"code":"import Axios from 'axios';\nexport const getAllUser = () => {\n  return dispatch => {\n    //dispatch c'est ce qu'on va envoyer au reducer\n    return Axios.get('http://localhost:4000/api/user/').then(res => {\n      dispatch({\n        type: \"All users\",\n        payload: res.data\n      }); //toute la data qu'on vient de chercher, on la passe au reduxer\n    }).catch(err => console.log(err));\n  };\n};\nexport const getUser = id => {\n  return dispatch => {\n    //dispatch c'est ce qu'on va envoyer au reducer\n    return Axios.get(`http://localhost:4000/api/user/${id}`).then(res => {\n      dispatch({\n        type: \"User\",\n        payload: res.data\n      }); //toute la data qu'on vient de chercher, on la passe au reduxer\n    }).catch(err => console.log(err));\n  };\n};\nexport const updateBio = (id, bio) => {\n  return dispatch => {\n    return Axios(`http://localhost:4000/api/user/update/${id}`, {\n      method: \"PUT\",\n      data: {\n        bio: bio\n      }\n    }).then(res => {\n      dispatch({\n        type: \"Update bio\",\n        payload: bio\n      }); //payload : donnée qu'on envoie dans notre store\n    }).catch(err => console.log(err));\n  };\n};\nexport const followUser = userid => {\n  return dispatch => {\n    return Axios('http://localhost:4000/api/friend/follow', {\n      method: \"PATCH\",\n      data: {\n        userid: userid\n      }\n    }).then(res => {\n      dispatch({\n        type: \"Follow user\",\n        payload: {\n          userid\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n};\nexport const unfollowUser = userid => {\n  return dispatch => {\n    return Axios('http://localhost:4000/api/friend/unfollow', {\n      method: \"PATCH\",\n      data: {\n        userid: userid\n      }\n    }).then(res => {\n      dispatch({\n        type: \"Unfollow user\",\n        payload: {\n          userid\n        }\n      });\n    }).catch(err => console.log(err));\n  };\n};\nconst initialState = {};\nexport const reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"All users\":\n      return action.payload;\n\n    case \"User\":\n      return action.payload;\n    //Toute la data de res.data qui à été envoyé avec action.payload on incrémente notre initialState\n\n    case \"Update bio\":\n      return { ...state,\n        bio: action.payload\n      };\n\n    case \"Follow user\":\n      return { ...state,\n        abonne: [action.payload.userid, ...state.abonne]\n      };\n\n    case \"Unfollow user\":\n      return { ...state,\n        abonnement: state.abonnement.filter(id => id !== action.payload.userid)\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/macbookair/Desktop/S6/LU3IN017/cheeky/Client/src/component/Utilitaire/userReducer.js"],"names":["Axios","getAllUser","dispatch","get","then","res","type","payload","data","catch","err","console","log","getUser","id","updateBio","bio","method","followUser","userid","unfollowUser","initialState","reducer","state","action","abonne","abonnement","filter"],"mappings":"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","sourcesContent":["import Axios from 'axios';\n\nexport const getAllUser = () => {\n\treturn(dispatch) => { //dispatch c'est ce qu'on va envoyer au reducer\n\t\treturn Axios.get(\n\t\t\t'http://localhost:4000/api/user/'\n\t\t)\n\t\t.then((res) => {\n\t\t\tdispatch(\n\t\t\t\t{ \n\t\t\t\t\ttype: \"All users\", \n\t\t\t\t\tpayload: res.data \n\t\t\t\t}); //toute la data qu'on vient de chercher, on la passe au reduxer\n\t\t})\n\t\t.catch((err) => console.log( err ));\n\t};\n};\n\nexport const getUser = (id) => {\n\treturn(dispatch) => { //dispatch c'est ce qu'on va envoyer au reducer\n\t\treturn Axios.get(\n\t\t\t`http://localhost:4000/api/user/${id}`\n\t\t)\n\t\t.then((res) => {\n\t\t\tdispatch(\n\t\t\t\t{ \n\t\t\t\t\ttype: \"User\", \n\t\t\t\t\tpayload: res.data \n\t\t\t\t}); //toute la data qu'on vient de chercher, on la passe au reduxer\n\t\t})\n\t\t.catch((err) => console.log( err ));\n\t};\n};\n\nexport const updateBio = (id, bio) => {\n\treturn (dispatch) => {\n\t\treturn Axios(\n\t\t\t`http://localhost:4000/api/user/update/${id}`,\n\t\t\t{\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\tdata : {\n\t\t\t\t\tbio: bio\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t)\n\t\t.then((res) =>{\n\t\t\tdispatch(\n\t\t\t{\n\t\t\t\ttype: \"Update bio\", \n\t\t\t\tpayload: bio\n\t\t\t}) //payload : donnée qu'on envoie dans notre store\n\t\t})\n\t\t.catch((err) => console.log( err ))\n\t};\n};\n\nexport const followUser = (userid) => {\n\treturn (dispatch) => {\n\t\treturn Axios(\n\t\t \t'http://localhost:4000/api/friend/follow',\n\t\t \t{\n\t\t \t\tmethod: \"PATCH\",\n\t\t \t\tdata: {\n\t\t\t\t\tuserid: userid\n\t\t\t\t}\n\t\t \t}\n\t\t\t\n\t\t)\n\t\t.then((res) => {\n\t\t\tdispatch(\n\t\t\t\t{ \n\t\t\t\t\ttype: \"Follow user\", \n\t\t\t\t\tpayload: { userid }\n\t\t\t\t});\n\t\t})\n\t\t.catch((err) => console.log( err ));\n  \t};\n};\n\nexport const unfollowUser = (userid) => {\n\treturn (dispatch) => {\n\t\treturn Axios(\n\t\t\t'http://localhost:4000/api/friend/unfollow',\n\t\t\t{\n\t\t \t\tmethod: \"PATCH\",\n\t\t \t\tdata: {\n\t\t\t\t\tuserid: userid\n\t\t\t\t}\n\t\t \t}\n\t\t)\n\t\t.then((res) => {\n\t\t\tdispatch(\n\t\t\t\t{ \n\t\t\t\t\ttype: \"Unfollow user\", \n\t\t\t\t\tpayload: { userid } \n\t\t\t\t});\n\t\t})\n\t  .catch((err) => console.log( err ));\n  };\n};\n\nconst initialState = {};\n\nexport const reducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase \"All users\":\n\t\t\treturn action.payload;\n\t\tcase \"User\":\n\t\t\treturn action.payload; //Toute la data de res.data qui à été envoyé avec action.payload on incrémente notre initialState\n\t\tcase \"Update bio\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbio: action.payload,\n\t\t\t};\n\t\tcase \"Follow user\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tabonne: [ action.payload.userid, ...state.abonne],\n\t\t\t};\n\t\tcase \"Unfollow user\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tabonnement: state.abonnement.filter((id) => id !== action.payload.userid),\n\t\t\t};\n\t\tdefault:\n\t\treturn state;\n\t}\n}; \n"]},"metadata":{},"sourceType":"module"}