{"ast":null,"code":"import Axios from 'axios';\nexport const UserLoading = \"User loading\";\nexport const User = \"User\";\nexport const Register = \"Register user\";\nexport const Login = \"Login user\";\nexport const Logout = \"Logout user\";\n\nconst userLoading = dispatch => {\n  dispatch({\n    type: \"User loading\"\n  });\n};\n\nexport const register = formData => {\n  return dispatch => {\n    return Axios.post('http://localhost:4000/api/sign/register', formData).then(res => {\n      dispatch({\n        type: \"Register user\",\n        payload: res.data\n      });\n    }).catch(err => {\n      console.dir(err);\n      const {\n        errors,\n        msg\n      } = err.reponse.data;\n\n      if (Array.isArray(errors)) {\n        errors.forEach(err => alert(err.msg));\n      }\n\n      console.log(errors);\n\n      if (msg) {\n        alert(msg);\n      }\n    });\n  };\n};\nexport const login = formData => {\n  return dispatch => {\n    return Axios.post('http://localhost:4000/api/sign/login', formData).then(res => {\n      dispatch({\n        type: \"Login user\",\n        payload: res.data\n      });\n    }).catch(err => {\n      console.dir(err);\n      localStorage.setItem(\"cookie\", res.data.cookies);\n      localStorage.setItem(\"user\", res.data.user);\n      const {\n        errors,\n        msg\n      } = err.reponse.data;\n\n      if (Array.isArray(errors)) {\n        errors.forEach(err => alert(err.msg));\n      }\n\n      console.log(errors);\n\n      if (msg) {\n        alert(msg);\n      }\n    });\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    return Axios.post('http://localhost:4000/api/sign/logout').then(res => {\n      dispatch({\n        type: \"Logout user\"\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const getUser = () => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        Authorization: 'Bearer ' + localStorage.getItem('cookie')\n      }\n    };\n    const res = await Axios.get('http://localhost:4000/api/user/', config);\n    dispatch({\n      type: \"User\",\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n  }\n\n  ;\n};","map":{"version":3,"sources":["/Users/macbookair/Desktop/S6/LU3IN017/cheeky/Client/src/component/Utilitaire/reducers/authAction.js"],"names":["Axios","UserLoading","User","Register","Login","Logout","userLoading","dispatch","type","register","formData","post","then","res","payload","data","catch","err","console","dir","errors","msg","reponse","Array","isArray","forEach","alert","log","login","localStorage","setItem","cookies","user","logout","getUser","config","headers","Authorization","getItem","get"],"mappings":"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","sourcesContent":["import Axios from 'axios';\n\nexport const UserLoading = \"User loading\";\nexport const User = \"User\";\nexport const Register = \"Register user\";\nexport const Login = \"Login user\";\nexport const Logout = \"Logout user\";\n\nconst userLoading = (dispatch) => {\n\tdispatch({\n\t\ttype: \"User loading\"\n\t})\n}\n\nexport const register = (formData) => {\n\treturn (dispatch) => {\n\t\treturn Axios.post(\n\t\t\t'http://localhost:4000/api/sign/register',\n\t\t\tformData\n\t\t)\n\t\t.then((res) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"Register user\",\n\t\t\t\tpayload: res.data\n\t\t\t})\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.dir(err);\n\n\t\t\tconst { errors, msg } = err.reponse.data;\n\n\t\t\tif(Array.isArray(errors)) {\n\t\t\t\terrors.forEach((err) => alert(err.msg));\n\t\t\t}\n\t\t\tconsole.log(errors);\n\n\t\t\tif(msg) {\n\t\t\t\talert(msg);\n\t\t\t}\n\t\t})\n\t}\n};\n\nexport const login = (formData) => {\n\treturn (dispatch) => {\n\t\treturn Axios.post(\n\t\t\t'http://localhost:4000/api/sign/login',\n\t\t\tformData\n\t\t)\n\t\t.then((res) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"Login user\",\n\t\t\t\tpayload: res.data\n\t\t\t})\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.dir(err);\n\t\t\t\n\t\t\tlocalStorage.setItem(\"cookie\", res.data.cookies);\n\t\t\tlocalStorage.setItem(\"user\", res.data.user);\n\n\t\t\tconst { errors, msg } = err.reponse.data;\n\n\t\t\tif(Array.isArray(errors)) {\n\t\t\t\terrors.forEach((err) => alert(err.msg));\n\t\t\t}\n\t\t\tconsole.log(errors);\n\n\t\t\tif(msg) {\n\t\t\t\talert(msg);\n\t\t\t}\n\t\t})\n\t}\n};\n\nexport const logout = () => {\n\treturn (dispatch) => {\n\t\treturn Axios.post(\n\t\t\t'http://localhost:4000/api/sign/logout',\n\t\t)\n\t\t.then(res => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"Logout user\"\n\t\t\t})\n\t\t}\n\t\t)\n\t\t.catch(err => {\n\t\t\tconsole.log(err);\n\t\t});\n\t}\n}\n\nexport const getUser = () => async dispatch => {\n\ttry { \n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer ' + localStorage.getItem('cookie')\n\t\t\t}\n\t\t};\n\n\t\tconst res = await Axios.get('http://localhost:4000/api/user/', config)\n\t\tdispatch({ \n\t\t\ttype: \"User\", \n\t\t\tpayload: res.data \n\t\t}); \n\t}catch(err) {\n\t\tconsole.log( err )\n\t};\n};"]},"metadata":{},"sourceType":"module"}