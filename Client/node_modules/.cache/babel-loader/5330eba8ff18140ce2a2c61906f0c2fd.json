{"ast":null,"code":"var _jsxFileName = \"/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Post/LikeButton.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { UidContext } from \"../../AppContext\";\nimport Popup from 'reactjs-popup'; //petite librairie qui gère les popups\n\nimport 'reactjs-popup/dist/index.css';\nimport { useDispatch } from 'react-redux';\nimport { likePost, unlikePost } from '../../Utilitaire/actions/post.actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LikeButton = ({\n  post\n}) => {\n  _s();\n\n  const [liked, setLiked] = useState(false); //pour voir si c'est liké de base ou non (ici non)\n\n  const uid = useContext(UidContext); //on récupère seulement l'uid de notre utilisateur\n\n  const dispatch = useDispatch(); // pour lancer notre fonction\n\n  const like = () => {\n    dispatch(likePost(post._id, uid));\n    setLiked(true);\n  };\n\n  const unlike = () => {\n    dispatch(unlikePost(post._id, uid));\n    setLiked(false);\n  };\n\n  useEffect(() => {\n    if (post.likers.includes(uid)) setLiked(true); //on regarde si l'id de notre utilisateur est dans le tableau des likes du post\n    else setLiked(false);\n  }, [uid, post.likers, liked]); //on lance quand on récup le uid, et on le relance quand on a la tableau des posts et quand on like\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"liked-container\",\n    children: [uid === null &&\n    /*#__PURE__*/\n\n    /*Si on est pas connecté alors on peut pas like le post */\n    _jsxDEV(Popup, {\n      trigger: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"./img/icons/heart.svg\",\n        alt: \"like\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 21\n      }, this),\n      position: ['bottom center', 'bottom right', 'bottom left'],\n      closeOnDocumentClick: true,\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Connectez-vous pour pouvoir aimer ce post !\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }, this), uid && liked === false && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"./img/icons/heart.svg\",\n      onClick: like,\n      alt: \"like\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }, this), uid && liked && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"./img/icons/heart-filled.svg\",\n      onClick: unlike,\n      alt: \"unlike\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: post.likers.length\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 3\n  }, this);\n};\n\n_s(LikeButton, \"8gHQf214N4xDUUQVyIcuMJlLdF0=\", false, function () {\n  return [useDispatch];\n});\n\n_c = LikeButton;\nexport default LikeButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"LikeButton\");","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Post/LikeButton.js"],"names":["React","useContext","useEffect","useState","UidContext","Popup","useDispatch","likePost","unlikePost","LikeButton","post","liked","setLiked","uid","dispatch","like","_id","unlike","likers","includes","length"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,eAAlB,C,CAAmC;;AACnC,OAAO,8BAAP;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,uCAArC;;;AAEA,MAAMC,UAAU,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAY;AAAA;;AAC9B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,KAAD,CAAlC,CAD8B,CACa;;AAC3C,QAAMU,GAAG,GAAGZ,UAAU,CAACG,UAAD,CAAtB,CAF8B,CAEM;;AACpC,QAAMU,QAAQ,GAAGR,WAAW,EAA5B,CAH8B,CAGE;;AAEhC,QAAMS,IAAI,GAAG,MAAM;AAClBD,IAAAA,QAAQ,CAACP,QAAQ,CAACG,IAAI,CAACM,GAAN,EAAWH,GAAX,CAAT,CAAR;AACAD,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,GAHD;;AAKA,QAAMK,MAAM,GAAG,MAAM;AACpBH,IAAAA,QAAQ,CAACN,UAAU,CAACE,IAAI,CAACM,GAAN,EAAWH,GAAX,CAAX,CAAR;AACAD,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,GAHD;;AAKAV,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIQ,IAAI,CAACQ,MAAL,CAAYC,QAAZ,CAAqBN,GAArB,CAAJ,EAA+BD,QAAQ,CAAC,IAAD,CAAR,CAA/B,CAA8C;AAA9C,SACKA,QAAQ,CAAC,KAAD,CAAR;AACL,GAHQ,EAGN,CAACC,GAAD,EAAMH,IAAI,CAACQ,MAAX,EAAmBP,KAAnB,CAHM,CAAT,CAf8B,CAkBA;;AAE9B,sBACC;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA,eACEE,GAAG,KAAK,IAAR;AAAA;;AAAgB;AAChB,YAAC,KAAD;AAAO,MAAA,OAAO,eAAE;AAAK,QAAA,GAAG,EAAC,uBAAT;AAAiC,QAAA,GAAG,EAAC;AAArC;AAAA;AAAA;AAAA;AAAA,cAAhB;AAAgE,MAAA,QAAQ,EACvE,CAAC,eAAD,EAAkB,cAAlB,EAAkC,aAAlC,CADD;AAEE,MAAA,oBAAoB,MAFtB;AAAA,mCAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAYEA,GAAG,IAAIF,KAAK,KAAK,KAAjB,iBACA;AAAK,MAAA,GAAG,EAAC,uBAAT;AAAiC,MAAA,OAAO,EAAEI,IAA1C;AAAgD,MAAA,GAAG,EAAC;AAApD;AAAA;AAAA;AAAA;AAAA,YAbF,EAeEF,GAAG,IAAIF,KAAP,iBACA;AAAK,MAAA,GAAG,EAAC,8BAAT;AAAwC,MAAA,OAAO,EAAEM,MAAjD;AAAyD,MAAA,GAAG,EAAC;AAA7D;AAAA;AAAA;AAAA;AAAA,YAhBF,eAkBC;AAAA,gBAAOP,IAAI,CAACQ,MAAL,CAAYE;AAAnB;AAAA;AAAA;AAAA;AAAA,YAlBD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAsBA,CA1CD;;GAAMX,U;UAGYH,W;;;KAHZG,U;AA4CN,eAAeA,UAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { UidContext } from \"../../AppContext\"; \r\nimport Popup from 'reactjs-popup'; //petite librairie qui gère les popups\r\nimport 'reactjs-popup/dist/index.css';\r\nimport { useDispatch } from 'react-redux';\r\nimport { likePost, unlikePost } from '../../Utilitaire/actions/post.actions';\r\n\r\nconst LikeButton = ({post}) => {\r\n\tconst [liked, setLiked] = useState(false); //pour voir si c'est liké de base ou non (ici non)\r\n\tconst uid = useContext(UidContext); //on récupère seulement l'uid de notre utilisateur\r\n\tconst dispatch = useDispatch(); // pour lancer notre fonction\r\n\r\n\tconst like = () => {\r\n\t\tdispatch(likePost(post._id, uid))\r\n\t\tsetLiked(true);\r\n\t}\r\n    \r\n\tconst unlike = () => {\r\n\t\tdispatch(unlikePost(post._id, uid))\r\n\t\tsetLiked(false);\r\n\t}\r\n\r\n\tuseEffect(() => { \r\n\t\tif (post.likers.includes(uid)) setLiked(true) //on regarde si l'id de notre utilisateur est dans le tableau des likes du post\r\n\t\telse setLiked(false)\r\n\t}, [uid, post.likers, liked]) //on lance quand on récup le uid, et on le relance quand on a la tableau des posts et quand on like\r\n\r\n\treturn (\r\n\t\t<div className=\"liked-container\">\r\n\t\t\t{uid === null && /*Si on est pas connecté alors on peut pas like le post */\r\n\t\t\t\t<Popup trigger={<img src=\"./img/icons/heart.svg\" alt=\"like\" />} position={\r\n\t\t\t\t\t['bottom center', 'bottom right', 'bottom left']\r\n\t\t\t\t} closeOnDocumentClick> {/* dès qu'on clique ailleurs ca ferme la fenetre */}\r\n\t\t\t\t\r\n\t\t\t\t<div> \r\n\t\t\t\t\tConnectez-vous pour pouvoir aimer ce post ! \r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t</Popup>\r\n\t\t\t}\r\n\t\t\t{uid && liked === false && (\r\n\t\t\t\t<img src=\"./img/icons/heart.svg\" onClick={like} alt=\"like\" />\r\n\t\t\t)}\r\n\t\t\t{uid && liked && (\r\n\t\t\t\t<img src=\"./img/icons/heart-filled.svg\" onClick={unlike} alt=\"unlike\" />\r\n\t\t\t)}\r\n\t\t\t<span>{post.likers.length}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LikeButton;"]},"metadata":{},"sourceType":"module"}