{"ast":null,"code":"import { DELETE_COMMENT, DELETE_POST, EDIT_COMMENT, GET_POSTS, LIKE_POST, UNLIKE_POST, UPDATE_POST } from \"../actions/post.actions\";\nconst initialState = {}; //quand on démarre un store, on commence toujours avec un  initialState = vide\n\nexport default function postReducer(state = initialState, action) {\n  switch (action.type) {\n    case GET_POSTS:\n      return action.payload;\n    //on lui passe toute la data vu qu'on veut envoyer toute les données\n\n    case LIKE_POST:\n      return state.map(post => {\n        if (post._id === action.payload.postId) {\n          //on va identifier le message en question\n          return { ...post,\n            //on retourne le post \n            likers: [action.payload.userId, ...post.likers] // on rajoute le like dans le tableau des likes -> store\n\n          };\n        }\n\n        return post;\n      });\n\n    case UNLIKE_POST:\n      return state.map(post => {\n        if (post._id === action.payload.postId) {\n          return { ...post,\n            likers: post.likers.filter(id => id !== action.payload.userId) //si l'id n'est pas égale userId alors on retire du tableau\n\n          };\n        }\n\n        return post; //pour retourner ce qu'on a changé\n      });\n\n    case UPDATE_POST:\n      return state.map(post => {\n        if (post._id === action.payload.postId) {\n          return { ...post,\n            message: action.payload.message\n          };\n        }\n\n        return post;\n      });\n\n    case DELETE_POST:\n      return state.filter(post => post._id !== action.payload.postId);\n\n    case EDIT_COMMENT:\n      return state.map(post => {\n        if (post._id === action.payload.postId) {\n          return { ...post,\n            comments: post.comments.map(comment => {\n              if (comment._id === action.payload.commentId) {\n                return { ...comment,\n                  text: action.payload.text\n                };\n              } else {\n                return comment;\n              }\n            })\n          };\n        } else return post;\n      });\n\n    case DELETE_COMMENT:\n      return state.map(post => {\n        if (post._id === action.payload.postId) {\n          return { ...post,\n            comments: post.comments.filter(comment => comment._id !== action.payload.commentId)\n          };\n        } else {\n          return post;\n        }\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Utilitaire/reducers/post.reducer.js"],"names":["DELETE_COMMENT","DELETE_POST","EDIT_COMMENT","GET_POSTS","LIKE_POST","UNLIKE_POST","UPDATE_POST","initialState","postReducer","state","action","type","payload","map","post","_id","postId","likers","userId","filter","id","message","comments","comment","commentId","text"],"mappings":"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","sourcesContent":["import { DELETE_COMMENT, DELETE_POST, EDIT_COMMENT, GET_POSTS, LIKE_POST, UNLIKE_POST, UPDATE_POST } from \"../actions/post.actions\";\r\n\r\nconst initialState = {}; //quand on démarre un store, on commence toujours avec un  initialState = vide\r\n\r\nexport default function postReducer(state = initialState, action){\r\n\tswitch(action.type){\r\n\t\tcase GET_POSTS:\r\n\t\t\treturn action.payload; //on lui passe toute la data vu qu'on veut envoyer toute les données\r\n\t\t\r\n\t\tcase LIKE_POST:\r\n\t\t\treturn state.map((post) => {\r\n\t\t\t\tif (post._id === action.payload.postId) { //on va identifier le message en question\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post, //on retourne le post \r\n\t\t\t\t\t\tlikers: [action.payload.userId, ...post.likers] // on rajoute le like dans le tableau des likes -> store\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\treturn post;\r\n\t\t\t})\r\n\t\t\t\r\n\t\tcase UNLIKE_POST:\r\n\t\t\treturn state.map((post) => {\r\n\t\t\t\tif (post._id === action.payload.postId) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tlikers: post.likers.filter((id) => id !== action.payload.userId) //si l'id n'est pas égale userId alors on retire du tableau\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn post; //pour retourner ce qu'on a changé\r\n\t\t\t})\r\n\t\t\r\n\t\tcase UPDATE_POST:\r\n\t\t\treturn state.map((post) => {\r\n\t\t\t\tif (post._id === action.payload.postId){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tmessage: action.payload.message\r\n\t\t\t\t\t};\r\n\t\t\t\t} return post; \r\n\t\t\t})\r\n\r\n\t\tcase DELETE_POST:\r\n\t\t\treturn state.filter((post) => post._id !== action.payload.postId);\r\n\r\n\t\tcase EDIT_COMMENT:\r\n\t\t\treturn state.map((post) => {\r\n\t\t\t\tif(post._id === action.payload.postId){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tcomments: post.comments.map((comment) => {\r\n\t\t\t\t\t\t\tif (comment._id === action.payload.commentId){\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t...comment,\r\n\t\t\t\t\t\t\t\t\ttext: action.payload.text\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\treturn comment;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else return post;\r\n\t\t\t})\r\n\t\t\t\r\n\t\tcase DELETE_COMMENT:\r\n\t\t\treturn state.map((post) => {\r\n\t\t\t\tif(post._id === action.payload.postId){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tcomments: post.comments.filter((comment) => comment._id !== action.payload.commentId)\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn post;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}