{"ast":null,"code":"var _jsxFileName = \"/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Post/NewPostForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addPost, getPosts } from '../../Utilitaire/actions/post.actions';\nimport { isEmpty } from '../../Utilitaire/Util';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewPostForm = () => {\n  _s();\n\n  const [message, setMessage] = useState(\"\"); //texte du message\n\n  const userData = useSelector(state => state.userReducer); //charger le contenu de notre store (user et users)\n\n  const usersData = useSelector(state => state.userReducer);\n  const error = useSelector(state => state.errorReducer.postError);\n  const dispatch = useDispatch();\n\n  const handlePost = async () => {\n    if (message) {\n      await dispatch(addPost(userData._id, message)); // on envoie la data pour faire la requete \n\n      dispatch(getPosts());\n      cancelPost();\n    } else {\n      alert(\"Veuillez entrer un message\");\n    }\n  };\n\n  const cancelPost = () => {\n    setMessage('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Post\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-right\",\n            children: [usersData.map(user => {\n              for (let i = 0; i < userData.termes.length; i++) {\n                const mot = message.split(' ');\n\n                for (let j = 0; j < mot.length; j++) {\n                  if (mot[j] == termes[i]) {\n                    return message.replace(termes[i]);\n                  }\n                }\n              }\n\n              return null;\n            }), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"message\",\n              id: \"message\",\n              placeholder: \"Quoi de beau ?\",\n              onChange: e => setMessage(e.target.value),\n              value: message,\n              rows: \"5\",\n              cols: \"60\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 7\n          }, this), message > 20 ? /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-container\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-right\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"content\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\" \", message, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 63,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 8\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"footer-form\",\n          children: [\" \", !isEmpty(error.format) && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error.format\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 34\n          }, this), !isEmpty(error.maxSize) && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error.maxSize\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 35\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-send\",\n            children: [message > 20 ?\n            /*#__PURE__*/\n\n            /* permet d'afficher le bouton uniquement quand il y a du contenu dedans */\n            _jsxDEV(\"button\", {\n              className: \"cancel\",\n              onClick: cancelPost,\n              children: \"Annuler message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 9\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"send\",\n              onClick: handlePost,\n              children: \"Envoyer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 3\n  }, this);\n};\n\n_s(NewPostForm, \"YOWBmlDQuZxFuB9oDl8VNb1l6kw=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = NewPostForm;\nexport default NewPostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewPostForm\");","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6-2022/LU3IN017/ProjetWeb/cheeky/Client/src/component/Page/Post/NewPostForm.js"],"names":["React","useState","useDispatch","useSelector","addPost","getPosts","isEmpty","NewPostForm","message","setMessage","userData","state","userReducer","usersData","error","errorReducer","postError","dispatch","handlePost","_id","cancelPost","alert","map","user","i","termes","length","mot","split","j","replace","e","target","value","format","maxSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addPost, getPosts } from '../../Utilitaire/actions/post.actions';\r\nimport { isEmpty } from '../../Utilitaire/Util';\r\n\r\nconst NewPostForm = () => {\r\n\tconst [message, setMessage] = useState(\"\"); //texte du message\r\n\tconst userData = useSelector((state) => state.userReducer); //charger le contenu de notre store (user et users)\r\n\tconst usersData = useSelector((state) => state.userReducer);\r\n\tconst error = useSelector((state) => state.errorReducer.postError);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst handlePost = async () => {\r\n\t\tif (message) {\r\n\t\t\t\r\n\t\t\tawait dispatch(addPost(userData._id, message)); // on envoie la data pour faire la requete \r\n\t\t\tdispatch(getPosts());\r\n\t\t\tcancelPost();\r\n\r\n\t\t} else {\r\n\t\t\talert(\"Veuillez entrer un message\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst cancelPost = () => {\r\n\t\tsetMessage('');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"post-container\">\r\n\t\t\t<div className='Post'>\r\n\t\t\t\t<div className=\"post-form\">\r\n\t\t\t\t\t<div className=\"card-container\">\r\n\t\t\t\t\t\t<div className=\"card-right\">\r\n\t\t\t\t\t\t\t{usersData.map((user) => {\r\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < userData.termes.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tconst mot = message.split(' ')\r\n\t\t\t\t\t\t\t\t\t\tfor(let j = 0; j < mot.length; j++)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tif(mot[j] == termes[i])\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn message.replace(termes[i]);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\t\t\tid=\"message\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Quoi de beau ?\"\r\n\t\t\t\t\t\t\t\tonChange={(e) => setMessage(e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={message}\r\n\t\t\t\t\t\t\t\trows=\"5\"\r\n\t\t\t\t\t\t\t\tcols=\"60\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{message > 20 ? (\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<div className=\"card-container\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"card-right\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p> { message } </p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"footer-form\"> {/*Si on a mis une image alors on peut pas mettre de vidéo et inversement */}\r\n\t\t\t\t\t\t{!isEmpty(error.format) && <p>{error.format}</p>}\r\n\t\t\t\t\t\t{!isEmpty(error.maxSize) && <p>{error.maxSize}</p>}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"btn-send\">\r\n\t\t\t\t\t\t\t{message > 20 ? ( /* permet d'afficher le bouton uniquement quand il y a du contenu dedans */\r\n\t\t\t\t\t\t\t\t<button className=\"cancel\" onClick={cancelPost}>Annuler message</button>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<button className=\"send\" onClick={handlePost}>Envoyer</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NewPostForm;"]},"metadata":{},"sourceType":"module"}