{"ast":null,"code":"var _jsxFileName = \"/Users/ihsaneboubrik/Desktop/L3/S6/LU3IN017/TME/dossier sans titre/cheeky/Client/src/component/Page/Post/CardComment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addComment, getPosts } from '../../actions/post.actions';\nimport Follow from '../Profil/Follow';\nimport { isEmpty, timestampParser } from '../Utils';\nimport EditDeleteComment from './EditDeleteComment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CardComment = ({\n  post\n}) => {\n  _s();\n\n  const [text, setText] = useState(\"\"); //le texte de notre commentaire\n\n  const usersData = useSelector(state => state.usersReducer);\n  const userData = useSelector(state => state.userReducer);\n  const dispatch = useDispatch(); //permet d'envoyer l'action\n\n  const handleComment = e => {\n    e.preventDefault(); //éviter de changer de page quand on clique sur confirmer\n\n    if (text) {\n      dispatch(addComment(post._id, userData._id, text, userData.pseudo)).then(() => dispatch(getPosts())) //on récupère tout les postes de mongoDb -> le store va se mettre a jour avec l'id unique du poste,\n      .then(() => setText('')); // on remet le texte du commentaire a vide si on veut en refaire un plus tard\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comments-container\",\n    children: [post.comments.map(comment => {\n      /*On montre tout les commentaires qui sont dans la liste du post */\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-container\"\n        /* Quand on commente un post notre commentaire va être d'une autre couleur*/\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-part\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src:\n            /* on récupère l'image de facon dynamique comme pour les post*/\n            !isEmpty(usersData[0]) && usersData.map(user => {\n              if (user._id === comment.commenterId) return user.picture;\n              return null;\n            }).join(\"\"),\n            alt: \"commenter-pic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-part\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pseudo\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: comment.commenterPseudo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 37\n              }, this), \" \", comment.commenterId !== userData._id &&\n              /*#__PURE__*/\n\n              /*pour pouvoir follow la personne qui a commenté (on ne peut pas ce suivre soit-même) */\n              _jsxDEV(Follow, {\n                idToFollow: comment.commenterId,\n                type: \"card\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: timestampParser(comment.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\" \", comment.text, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(EditDeleteComment, {\n            comment: comment,\n            postId: post._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 25\n        }, this)]\n      }, comment._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 21\n      }, this);\n    }), userData._id &&\n    /*#__PURE__*/\n\n    /* si jamais on est connecté alors on peut rajouter un commentaire*/\n    _jsxDEV(\"form\", {\n      action: \"\",\n      onSubmit: handleComment,\n      className: \"comment-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"text\",\n        onChange: e => setText(e.target.value),\n        value: text,\n        placeholder: \"Commentaire\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Envoyer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CardComment, \"ZHyW6oEmvqsEpl2vcMvFa+6fKc4=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = CardComment;\nexport default CardComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardComment\");","map":{"version":3,"sources":["/Users/ihsaneboubrik/Desktop/L3/S6/LU3IN017/TME/dossier sans titre/cheeky/Client/src/component/Page/Post/CardComment.js"],"names":["React","useState","useDispatch","useSelector","addComment","getPosts","Follow","isEmpty","timestampParser","EditDeleteComment","CardComment","post","text","setText","usersData","state","usersReducer","userData","userReducer","dispatch","handleComment","e","preventDefault","_id","pseudo","then","comments","map","comment","user","commenterId","picture","join","commenterPseudo","timestamp","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addComment, getPosts } from '../../actions/post.actions';\r\nimport Follow from '../Profil/Follow';\r\nimport { isEmpty, timestampParser } from '../Utils';\r\nimport EditDeleteComment from './EditDeleteComment';\r\n\r\nconst CardComment = ( { post } ) => {\r\n    const [text, setText] = useState(\"\"); //le texte de notre commentaire\r\n    const usersData = useSelector((state) => state.usersReducer);\r\n    const userData = useSelector((state) => state.userReducer);\r\n    const dispatch = useDispatch(); //permet d'envoyer l'action\r\n\r\n    const handleComment = (e) => {\r\n        e.preventDefault(); //éviter de changer de page quand on clique sur confirmer\r\n        if(text){\r\n            dispatch(addComment(post._id, userData._id, text, userData.pseudo))\r\n                .then(() => dispatch(getPosts())) //on récupère tout les postes de mongoDb -> le store va se mettre a jour avec l'id unique du poste,\r\n                .then(() => setText('')); // on remet le texte du commentaire a vide si on veut en refaire un plus tard\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"comments-container\">\r\n            {post.comments.map((comment) => { /*On montre tout les commentaires qui sont dans la liste du post */\r\n                return (\r\n                    <div className={\"comment-container\" /* Quand on commente un post notre commentaire va être d'une autre couleur*/} key={comment._id}>\r\n                        <div className=\"left-part\">\r\n                        <img \r\n                        src={ /* on récupère l'image de facon dynamique comme pour les post*/\r\n                            !isEmpty(usersData[0]) && \r\n                                usersData.map((user) => {\r\n                                    if (user._id === comment.commenterId) \r\n                                        return user.picture;\r\n                                    return null;\r\n                                }).join(\"\") \r\n                            }    \r\n                        alt=\"commenter-pic\"\r\n                        />\r\n                        </div>\r\n                        <div className=\"right-part\">\r\n                            <div className=\"comment-header\">\r\n                                <div className=\"pseudo\">\r\n                                    <h3>{comment.commenterPseudo}</h3> {/* On récupère le commentaire de manière non dynamique car on peut pas changer de pseudo  */}\r\n                                    {comment.commenterId !== userData._id && ( /*pour pouvoir follow la personne qui a commenté (on ne peut pas ce suivre soit-même) */\r\n                                        <Follow\r\n                                            idToFollow={comment.commenterId} \r\n                                            type={\"card\"} \r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                                <span>{timestampParser(comment.timestamp)}</span> \r\n                            </div>\r\n                            <p> {comment.text} </p>\r\n                            <EditDeleteComment comment={comment} postId={post._id} />\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n            {userData._id && ( /* si jamais on est connecté alors on peut rajouter un commentaire*/\r\n                <form action=\"\" onSubmit={handleComment} className=\"comment-form\">\r\n                    <input type=\"text\" name=\"text\" onChange={(e) => setText(e.target.value)} value={text} placeholder=\"Commentaire\"/>\r\n                    <br/>\r\n                    <input type=\"submit\" value=\"Envoyer\" /> \r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CardComment;"]},"metadata":{},"sourceType":"module"}