{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Desktop/S6/LU3IN017/cheeky/Client/src/component/Page/UserProfil.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Axios from 'axios';\nimport { UserContext } from '../NavigationPanel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profil = () => {\n  _s();\n\n  const [userProfile, setProfile] = useState(null);\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const {\n    userid\n  } = useParams();\n  const [showfollow, setShowFollow] = useState(state ? !state.abonne.includes(userid) : true);\n  useEffect(() => {\n    Axios(`http://localhost:4000/user/${userid}`, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"cookie\")\n      }\n    }).then(res => res.json()).then(result => {\n      setProfile(result);\n    });\n  }, []);\n\n  const followUser = () => {\n    Axios('http://localhost:4000/friend/follow', {\n      method: \"PATCH\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem('cookie')\n      },\n      body: {\n        abonnement: userid\n      }\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          abonne: data.abonne,\n          abonnement: data.abonnement\n        }\n      });\n      localStorage.setItem(\"user\", data);\n      setProfile(prevState => {\n        return { ...prevState,\n          user: { ...prevState.user,\n            abonne: [...prevState.user.abonne, data._id]\n          }\n        };\n      });\n      setShowFollow(false);\n    });\n  };\n\n  const unfollowUser = () => {\n    fetch('http://localhost:4000/friend/unfollow', {\n      method: \"PATCH\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem('cookie')\n      },\n      body: {\n        id: userid\n      }\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          abonne: data.abonne,\n          abonnement: data.abonnement\n        }\n      });\n      localStorage.setItem(\"user\", data);\n      setProfile(prevState => {\n        const newFollower = prevState.user.abonnement.filter(item => item !== data._id);\n        return { ...prevState,\n          user: { ...prevState.user,\n            abonnement: newFollower\n          }\n        };\n      });\n      setShowFollow(true);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: userProfile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: \"550px\",\n        margin: \"0px auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-around\",\n          margin: \"18px 0px\",\n          borderBottom: \"1px solid grey\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: userProfile.user.firstname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: userProfile.user.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: userProfile.user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              width: \"108%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [userProfile.posts.length, \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [userProfile.user.abonne.length, \" Abonn\\xE9\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [userProfile.user.abonnement.length, \" Abonnement\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 8\n          }, this), showfollow ? /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              margin: \"10px\"\n            },\n            className: \"btn waves-effect waves-light #64b5f6 blue darken-1\",\n            onClick: () => followUser(),\n            children: \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 9\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              margin: \"10px\"\n            },\n            className: \"btn waves-effect waves-light #64b5f6 blue darken-1\",\n            onClick: () => unfollowUser(),\n            children: \"UnFollow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"loading...!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Profil, \"9C0WAidz7Zl7bSUsWh/W37zpt7E=\", false, function () {\n  return [useParams];\n});\n\n_c = Profil;\nexport default Profil;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profil\");","map":{"version":3,"sources":["/Users/macbookair/Desktop/S6/LU3IN017/cheeky/Client/src/component/Page/UserProfil.js"],"names":["React","useEffect","useState","useContext","useParams","Axios","UserContext","Profil","userProfile","setProfile","state","dispatch","userid","showfollow","setShowFollow","abonne","includes","headers","Authorization","localStorage","getItem","then","res","json","result","followUser","method","body","abonnement","data","type","payload","setItem","prevState","user","_id","unfollowUser","fetch","id","newFollower","filter","item","maxWidth","margin","display","justifyContent","borderBottom","firstname","lastname","email","width","posts","length"],"mappings":"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","sourcesContent":["import React,{useEffect,useState,useContext} from 'react';\nimport { useParams } from 'react-router-dom';\nimport Axios from 'axios';\nimport { UserContext } from '../NavigationPanel';\n\nconst Profil  = () => {\n\tconst [ userProfile, setProfile ] = useState(null)\n\t\n\tconst { state, dispatch } = useContext(UserContext);\n\tconst { userid } = useParams();\n\tconst [ showfollow, setShowFollow ] = useState( state?!state.abonne.includes(userid):true);\n\n\tuseEffect(() => {\n\t\tAxios(\n\t\t\t`http://localhost:4000/user/${userid}`,\n\t\t\t{\n\t\t\t\theaders:\n\t\t\t\t{\n\t\t\t\t\tAuthorization: \"Bearer \" + localStorage.getItem( \"cookie\" )\n\t\t\t\t}\n\t\t\t}\n\t\t).then(res => res.json())\n\t\t.then(result => {\n\t\t\tsetProfile(result)\n\t\t})\n\t},[])\n\n\n\tconst followUser = () => {\n\t\tAxios(\n\t\t\t'http://localhost:4000/friend/follow',\n\t\t\t{\n\t\t\t\tmethod:\"PATCH\",\n\t\t\t\theaders:\n\t\t\t\t{\n\t\t\t\t\tAuthorization: \"Bearer \" + localStorage.getItem( 'cookie' )\n\t\t\t\t},\n\t\t\t\tbody: {\n\t\t\t\t\tabonnement: userid\n\t\t\t\t}\n\t\t}).then(res => res.json())\n\t\t.then(data => {\n\t\t\n\t\t\tdispatch(\n\t\t\t\t{\n\t\t\t\t\ttype: \"UPDATE\",\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tabonne: data.abonne,\n\t\t\t\t\t\tabonnement: data.abonnement\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\tlocalStorage.setItem(\"user\", data);\n\t\t\tsetProfile((prevState) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...prevState.user,\n\t\t\t\t\t\tabonne:[ ...prevState.user.abonne, data._id ]\n\t\t\t\t\t}\n\t\t\t\t }\n\t\t\t})\n\t\t\tsetShowFollow( false );\n\t\t})\n\t}\n\tconst unfollowUser = () => {\n\t\tfetch(\n\t\t\t'http://localhost:4000/friend/unfollow',\n\t\t\t{\n\t\t\t\tmethod:\"PATCH\",\n\t\t\t\theaders:\n\t\t\t\t{\n\t\t\t\t\tAuthorization: \"Bearer \" + localStorage.getItem( 'cookie' )\n\t\t\t\t},\n\t\t\t\tbody: {\n\t\t\t\t\tid: userid\n\t\t\t\t}\n\t\t}).then(res => res.json())\n\t\t.then(data => {\n\t\t\tdispatch(\n\t\t\t\t{\n\t\t\t\t\ttype:\"UPDATE\",\n\t\t\t\t\tpayload:{\n\t\t\t\t\t\tabonne: data.abonne,\n\t\t\t\t\t\tabonnement: data.abonnement\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\tlocalStorage.setItem(\"user\", data);\n\t\t\t\n\t\t\tsetProfile((prevState) => {\n\t\t\t\tconst newFollower = prevState.user.abonnement.filter(item => item !== data._id )\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...prevState.user,\n\t\t\t\t\t\tabonnement: newFollower\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetShowFollow( true );\n\t\t})\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{userProfile ?\n\t\t\t\t<div style={{maxWidth:\"550px\",margin:\"0px auto\"}}>\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay:\"flex\",\n\t\t\t\t\t\tjustifyContent:\"space-around\",\n\t\t\t\t\t\tmargin:\"18px 0px\",\n\t\t\t\t\t\tborderBottom:\"1px solid grey\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h4>{userProfile.user.firstname}</h4>\n\t\t\t\t\t\t\t<h4>{userProfile.user.lastname}</h4>\n\t\t\t\t\t\t\t<h5>{userProfile.user.email}</h5>\n\n\t\t\t\t\t\t\t<div style={{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"}}>\n\t\t\t\t\t\t\t\t<h6>{userProfile.posts.length} posts</h6>\n\t\t\t\t\t\t\t\t<h6>{userProfile.user.abonne.length} Abonné</h6>\n\t\t\t\t\t\t\t\t<h6>{userProfile.user.abonnement.length} Abonnement</h6>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{showfollow?\n\t\t\t\t\t\t\t\t<button style={{\n\t\t\t\t\t\t\t\t\t\tmargin:\"10px\"\n\t\t\t\t\t\t\t\t \t}} className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n\t\t\t\t\t\t\t\t\tonClick={()=>followUser()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tFollow\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t: \n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tmargin:\"10px\"\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n\t\t\t\t\t\t\t\t\tonClick={()=>unfollowUser()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tUnFollow\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t \t</div>\n\t\t\t\t</div>\n\t\t \t: <h2>loading...!</h2>}\n\t\t</>\n\t)\n}\n\n\nexport default Profil"]},"metadata":{},"sourceType":"module"}